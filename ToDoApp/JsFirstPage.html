<!DOCTYPE html>
<html>
<head>
<title>One Page</title>
</head>
<body>

<h1><b>To-Do List</b></h1>
<form action="/action_page.php">
    <input type="text" id="addItem" placeholder="Add an item"><br>
    
  </form>
  
  <button type="button" onclick=myFunc() >Submit!</button>
  <button type="button" onclick=myFunc1()>Clear List!</button>
  <p id="demo">Hello</p>
  
  
  <script>
      
      
      const arr = [];
      let txt="";
      let arr2 = [];
      map1 = new Map();

      function popOut(index){
        
        let arr10 = [];
         for (i in arr){
          
           if(i!==index.toString()){
             arr10.push(arr[i]);
           }

         }
         
         while(arr.length>0){
           arr.pop();
         }
         
         for(i in arr10){
           arr.push(arr10[i]);
         }
        
         
      }

      function replacenew(str3, ch1, ch2){
        let str4 = "";
        for(i in str3){
          if(str3[i]!==ch1){
            str4+=str3[i];
            
          }
          else{
            str4+=ch2;
          }
          
        }
        return str4;

      }

      function deleteArrayElements(ele, number){
        //console.log(ele);
        let arr3 = [];
        let arr4 = [];
        for (i in arr2){
            if(arr2[i]!==ele){
                arr3.push(arr2[i]);
            }
        }
        let number1 = parseInt(number);
        while(arr2.length > 0) {
               arr2.pop();
         }
        //arr2 = [];
        //console.log(arr3);
        let str="";
        for(i in arr3){
          str="";
          str+=arr3[i];
          let x = parseInt(str[6]);
         
          if(x>number1){
            
            x = x-1;
            let y  = x.toString();
            
            let str1 = replacenew(str, str[6], y);
            arr4.push(str1);
          }
          else{
            arr4.push(arr3[i]);
          }
          
          
        }
        
        for (i in arr4){
            arr2.push(arr4[i]);
        }
        
      }

      function specificPOP(r){
         
        let a="";
        let ab=-1;
        let y = r;
        for (i in arr2){
           
            ab = arr2[i].indexOf(r);
           
            if(ab>-1){
               deleteArrayElements(arr2[i],y);
            }
            
           
        }
        //console.log(arr2); 
        let z = parseInt(r);
        popOut(r-1);
        //
        document.getElementById("demo").innerHTML = arr2;
         
         
         
          
        }
        

      function myFunc(){
        
        let txt1="";
        item=document.getElementById("addItem").value;
        arr.push(item);
        
        let len = (arr.length ).toString();
        let par = "<p id="+len+">"+len+"."+arr[len-1]+"</p>";
        txt1+=par;
        map1.set(len,item);
        
        let btn1= "<button id=" +len+" "+"onclick=specificPOP(id)>X</button>";
        
        let btn2 = "<button id=" +len+">"+"Done</button>";
        txt1+= btn1+btn2;
       
        txt+=txt1;
        
        arr2.push(txt1);
        
        document.getElementById("demo").innerHTML = arr2;
         
         
      }

      function myFunc1(){
        
        
        while(arr2.length>0){
           arr2.pop();
         }
         while(arr.length>0){
           arr.pop();
         }
         document.getElementById("demo").innerHTML = arr2;
        
      }
      
      
  </script>
  
</body>
</html>